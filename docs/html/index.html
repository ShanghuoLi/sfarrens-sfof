<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>fof_cluster_finder: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">fof_cluster_finder
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">fof_cluster_finder Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section author"><dt>Authors</dt><dd>Samuel Farrens, Stefano Sartor, Luca Tornatore</dd></dl>
<h2>Contents </h2>
<ol type="1">
<li><a href="#intro_anchor">Introduction</a></li>
<li><a href="#depend_anchor">Dependenies</a></li>
<li><a href="#compile_anchor">Compilation</a></li>
<li><a href="#exe_anchor">Execution</a><ol type="a">
<li><a href="#main_anchor">Main Code</a></li>
<li><a href="#split_anchor">Cat_Split Code</a></li>
<li><a href="#merge_anchor">Cat_Merge Code</a></li>
</ol>
</li>
</ol>
<p><a class="anchor" id="intro_anchor"></a> </p>
<h2>Introduction </h2>
<p>FOF_OMP is a friends-of-friends galaxy cluster detection algorithm that operates in either spectroscopic or photometric redshift space. The linking parameters, both transverse and along the line-of-sight, change as a function of redshift to account for selection effects.</p>
<p>The code is written in C++ and implements OMP to loop through the photometric redshift bins.</p>
<p>Larger catalogues can be split into overlapping pieces using the <a class="el" href="cat__split_8cpp.html">cat_split.cpp</a> code. These pieces can than be run through the <a class="el" href="class_fo_f.html" title="Class for perfoming friends-of-friends cluster detection. ">FoF</a> independently and the subsequent results merged using the <a class="el" href="cat__merge_8cpp.html">cat_merge.cpp</a> code.</p>
<p><a class="anchor" id="depend_anchor"></a> </p>
<h2>Dependencies </h2>
<p>The codes (<a class="el" href="main_8cpp.html">main.cpp</a>, <a class="el" href="cat__split_8cpp.html">cat_split.cpp</a>, <a class="el" href="cat__merge_8cpp.html">cat_merge.cpp</a>) require the following packages:</p>
<ul>
<li><a href="http://www.cmake.org/" target="_blank">CMake</a></li>
<li><a href="http://www.boost.org/" target="_blank">Boost</a></li>
<li><a href="http://heasarc.gsfc.nasa.gov/fitsio/" target="_blank">CFITSIO</a></li>
<li><a href="http://openmp.org/wp/" target="_blank">OMP</a></li>
<li><a href="https://gcc.gnu.org/projects/cxx0x.html" target="_blank">C++0x/C++11</a></li>
</ul>
<p><a class="anchor" id="compile_anchor"></a> </p>
<h2>Compilation </h2>
<p>To compile the codes simply run:</p>
<blockquote class="doxtable">
<p>&gt;&gt; cmake CMakeLists.txt</p>
<p></p>
</blockquote>
<p>On some systems it may be neccesary to specify the paths to packages. This can be done with the following options:</p>
<ul>
<li>To specify the CFITSIO directory use the following option after the cmake command: <blockquote class="doxtable">
<p>-DCFITSIO_ROOT_DIR</p>
<p></p>
</blockquote>
<code>e.g cmake CMakeLists.txt -DCFITSIO_ROOT_DIR=/usr/cfitsio/</code></li>
<li>To specify the Boost directory use the following option after the cmake comamnd: <blockquote class="doxtable">
<p>-DBOOST_ROOT</p>
<p></p>
</blockquote>
<code>e.g cmake CMakeLists.txt -DCFITSIO_ROOT_DIR=/usr/boost/</code></li>
<li>The C and C++ compilers can also be specified using the following options before the cmake command: <blockquote class="doxtable">
<p>CC &amp; CXX</p>
<p></p>
</blockquote>
<code>e.g CC=gcc-4.9.0 CXX=g++-4.9.0 cmake CMakeLists.txt</code></li>
</ul>
<p>Upon successful compilation of the code three executables will be generated in the fof_cluster_finder subdirectory: <a class="el" href="class_main.html" title="Class for running the FoF algorithm. ">Main</a>, <a class="el" href="class_cat___split.html" title="Class for splitting galaxy catalogues. ">Cat_Split</a> and <a class="el" href="class_cat___merge.html" title="Class for merging cluster catalogues. ">Cat_Merge</a>.</p>
<p><b>Mac OSX</b></p>
<p>For help with comilation on Mac OSX see ./mac_osx_install.md "here".</p>
<p><a class="anchor" id="exe_anchor"></a> </p>
<h2>Execution </h2>
<p><a class="anchor" id="main_anchor"></a> <a class="el" href="class_main.html" title="Class for running the FoF algorithm. ">Main</a> Code</p>
<p>The friends-of-friends (<a class="el" href="class_fo_f.html" title="Class for perfoming friends-of-friends cluster detection. ">FoF</a>) algorithm can be run in two different modes (spectroscopic or photometric) depending on the type of input data.</p>
<p><a class="anchor" id="main_input"></a> <b>Input Format</b></p>
<p>The expected input file formats (ASCII or FITS) for the corresponding modes are as follows:</p>
<ul>
<li><code>Spectroscopic Mode</code>:<ol type="1">
<li><a class="el" href="class_galaxy.html" title="Class for storing galaxy properties. ">Galaxy</a> ID</li>
<li><a class="el" href="class_galaxy.html" title="Class for storing galaxy properties. ">Galaxy</a> Right Ascension</li>
<li><a class="el" href="class_galaxy.html" title="Class for storing galaxy properties. ">Galaxy</a> Declination</li>
<li><a class="el" href="class_galaxy.html" title="Class for storing galaxy properties. ">Galaxy</a> Redshift</li>
</ol>
</li>
<li><code>Photometric Mode</code>:<ol type="1">
<li><a class="el" href="class_galaxy.html" title="Class for storing galaxy properties. ">Galaxy</a> ID</li>
<li><a class="el" href="class_galaxy.html" title="Class for storing galaxy properties. ">Galaxy</a> Right Ascension</li>
<li><a class="el" href="class_galaxy.html" title="Class for storing galaxy properties. ">Galaxy</a> Declination</li>
<li><a class="el" href="class_galaxy.html" title="Class for storing galaxy properties. ">Galaxy</a> Photometric Redshift</li>
<li><a class="el" href="class_galaxy.html" title="Class for storing galaxy properties. ">Galaxy</a> Photometric Redshift Error</li>
</ol>
</li>
</ul>
<p><a class="anchor" id="main_output"></a> <b>Output Format</b></p>
<p>The code produces two output files. The first contains the properties of the detected cluster candidates and the second contains the properties of the member galaxies that belong to each of these candidates according to the <a class="el" href="class_fo_f.html" title="Class for perfoming friends-of-friends cluster detection. ">FoF</a>. The formats for the output files are as follows:</p>
<ul>
<li><code><a class="el" href="class_cluster.html" title="Class for storing galaxy cluster properties and members. ">Cluster</a> Prorperties</code>:<ol type="1">
<li><a class="el" href="class_cluster.html" title="Class for storing galaxy cluster properties and members. ">Cluster</a> ID</li>
<li><a class="el" href="class_cluster.html" title="Class for storing galaxy cluster properties and members. ">Cluster</a> Right Ascension [degrees] (median of members)</li>
<li><a class="el" href="class_cluster.html" title="Class for storing galaxy cluster properties and members. ">Cluster</a> Right Ascension Error [degrees] (error on median)</li>
<li><a class="el" href="class_cluster.html" title="Class for storing galaxy cluster properties and members. ">Cluster</a> Declination [degrees] (median of members)</li>
<li><a class="el" href="class_cluster.html" title="Class for storing galaxy cluster properties and members. ">Cluster</a> Declination Error [degrees] (error on median)</li>
<li><a class="el" href="class_cluster.html" title="Class for storing galaxy cluster properties and members. ">Cluster</a> Redshift (median of members)</li>
<li><a class="el" href="class_cluster.html" title="Class for storing galaxy cluster properties and members. ">Cluster</a> Redshift Error (error on median)</li>
<li><a class="el" href="class_cluster.html" title="Class for storing galaxy cluster properties and members. ">Cluster</a> N<sub>gal</sub> (i.e. number of members)</li>
<li><a class="el" href="class_cluster.html" title="Class for storing galaxy cluster properties and members. ">Cluster</a> Signal-to-noise ratio (see below for calculation)</li>
<li><a class="el" href="class_cluster.html" title="Class for storing galaxy cluster properties and members. ">Cluster</a> radius [arcmin] (average distance of members from centre)</li>
<li><a class="el" href="class_cluster.html" title="Class for storing galaxy cluster properties and members. ">Cluster</a> area [arcmin<sup>2</sup>]</li>
</ol>
</li>
<li><code>Member Prorperties</code>:<ol type="1">
<li><a class="el" href="class_cluster.html" title="Class for storing galaxy cluster properties and members. ">Cluster</a> ID</li>
<li><a class="el" href="class_cluster.html" title="Class for storing galaxy cluster properties and members. ">Cluster</a> N<sub>gal</sub></li>
<li><a class="el" href="class_cluster.html" title="Class for storing galaxy cluster properties and members. ">Cluster</a> Redshift</li>
<li><a class="el" href="class_galaxy.html" title="Class for storing galaxy properties. ">Galaxy</a> ID</li>
<li><a class="el" href="class_galaxy.html" title="Class for storing galaxy properties. ">Galaxy</a> Right Ascension [degrees]</li>
<li><a class="el" href="class_galaxy.html" title="Class for storing galaxy properties. ">Galaxy</a> Declination [degrees]</li>
<li><a class="el" href="class_galaxy.html" title="Class for storing galaxy properties. ">Galaxy</a> Redshift</li>
</ol>
</li>
</ul>
<p><b>Singal-to-Noise</b></p>
<p>The singal-to-noise ratio is calculated as follows:</p>
<p>S/N = (N<sub>gal</sub> - A * Bg) / (A * Bg)<sup>0.5</sup></p>
<p>where A is the cluster area and Bg is the background level at the cluster redshift. Unless an N(z) is provided the code simply takes the number of objects at the cluster redshift divided by the catalogue area as Bg.</p>
<p><b>Run</b></p>
<p>The code options can be provided either in a configuration file (Note: the defult configuration file name is <em>param_file.ini</em>) or directly as arguments.</p>
<p>If a configuration file is available the code can be run simply as follows:</p>
<blockquote class="doxtable">
<p>&gt;&gt; main</p>
<p></p>
</blockquote>
<p>All configuration file options can be overridden by providing a command line argument. For example to ignore a file name specified in the configuration file the following option can be used:</p>
<blockquote class="doxtable">
<p>&gt;&gt; main &ndash;input_file FILE_NAME</p>
<p></p>
</blockquote>
<p>All of the code options are listed below, but can be viewed by running:</p>
<blockquote class="doxtable">
<p>&gt;&gt; main &ndash;help</p>
<p></p>
</blockquote>
<p>The majority of the code options have defualt values that will be applicable to most data sets. The only options that need to be specified for every run are the input file name and the linking parameter values. For example to run the code in photometric mode on a data set that is well sampled around z=0.5 and does not extend beyond z=3.0 the following command would be sufficient to run the code:</p>
<blockquote class="doxtable">
<p>&gt;&gt; main -i FILE_NAME &ndash;link_r 0.06 &ndash;link_z 1.1</p>
<p></p>
</blockquote>
<p>See ../examples/readme.md "examples" for example data sets and configuration files to test the code.</p>
<p><b>Code Options</b></p>
<ul>
<li><code>-h [ --help ]</code>: This option produces the help message with all the code options and exits.</li>
<li><code>-v [ --version ]</code>: This option prints the current version of the code and exits.</li>
<li><code>-p [ --parameters ]</code>: This option prints the values assigned to each of the code parameters.</li>
<li><code>-c [ --config ]</code>: This option specifies the configuration file name. The default file name is param_file.ini.</li>
<li><code>-i [ --input_file ]</code>: This option specifies the input file name.</li>
<li><code>--output_clusters</code>: This option specifies the output file name of the cluster properties.</li>
<li><code>--output_members</code>: This option specifies the ouput file name of the cluster member properties</li>
<li><code>--link_r</code>: This option specifies the value of the transverse linking parameter.</li>
<li><code>--link_z</code>: This option specifies the value of the Line-of-sight linking parameter.</li>
<li><code>--input_mode</code>: This option specifies the input file format. The options permitted are ascii or fits. The default value is ascii.</li>
<li><code>--output_mode</code>: This option specifies the output file format. The options permitted are ascii or fits. The default value is ascii.</li>
<li><code>--fof_mode</code>: This option specifies the <a class="el" href="class_fo_f.html" title="Class for perfoming friends-of-friends cluster detection. ">FoF</a> redshift mode. The options permitted are spec or phot. The default value is phot.</li>
<li><code>--link_mode</code>: This option specifies the <a class="el" href="class_fo_f.html" title="Class for perfoming friends-of-friends cluster detection. ">FoF</a> linking mode. The options permitted are fixed or dynamic. The default value is dynamic.</li>
<li><code>--min_ngal</code>: This option specifies the minimum number of galaxies members required to form a cluster. The default value is 10.</li>
<li><code>--z_min</code>: This option specifies the low redshift limit of the sample. The default value is 0.0.</li>
<li><code>--z_max</code>: This option specifies the high redshift limit of the sample. The default value is 3.0.</li>
<li><code>--z_bin_size</code>: This option specifies the size of redshift bins. The default value is 0.01.</li>
<li><code>--z_ref</code>: This option specifies the reference redshift for calculations. The default value is 0.5.</li>
<li><code>--dz_max</code>: This option specifies the maximum photometric redshift error allowed. The default value is 0.05.</li>
<li><code>--nz_data</code>: This option specifies the file name for a predefined N(z) distribution.</li>
<li><code>--c</code>: This option specifies the speed of light in km/s. The default value is 2.997e5.</li>
<li><code>--H0</code>: This option specifies the value of the Hubble parameter in km/s/Mpc. The default value is 100.0.</li>
<li><code>--omega_m</code>: This option specifies the value of the matter density of the Universe. The default value is 0.3.</li>
<li><code>--omega_l</code>: This option specifies the value of the dark energy density of the Universe. The default value is 0.7.</li>
<li><code>--print_bin_data</code>: This option specifies that the redshift bin data should be printed to a file.</li>
<li><code>--print_kdtree_data</code>: This option specifies that the kd-tree data should be printed to a file.</li>
<li><code>--print_bg_data</code>: This option specifies that the background field data should be printed to a file.</li>
</ul>
<p><a class="anchor" id="split_anchor"></a> <a class="el" href="class_cat___split.html" title="Class for splitting galaxy catalogues. ">Cat_Split</a> Code</p>
<p>This code divides galaxy catalogues into overlapping pieces to facilitate the running of the <a class="el" href="class_fo_f.html" title="Class for perfoming friends-of-friends cluster detection. ">FoF</a> code (<a class="el" href="class_main.html" title="Class for running the FoF algorithm. ">Main</a>). At present the code can only read ASCII files.</p>
<p><b>Input Format</b></p>
<p>The input ASCII file can contain any number of columns, but the code expects to find the right ascension and declination of the galaxies in columns 2 and 3 respectively. Additionally, if the resulting pieces are to be used as inputs for the <a class="el" href="class_main.html" title="Class for running the FoF algorithm. ">Main</a> code then the the input should adhere to the same format as that for the <a class="el" href="class_main.html" title="Class for running the FoF algorithm. ">Main</a> code (see <a href="#main_input">above</a>).</p>
<p><b>Ouput Format</b></p>
<p>The code output will retain the exact same format as that of the input.</p>
<p><b>Run</b></p>
<p>To run the code the following properties need to be specified:</p>
<ol type="1">
<li>The input file name.</li>
<li>The limits (in RA and Dec) of the input catalogue.</li>
<li>The total number of pieces required.</li>
<li>The desired amount of overlap between pieces. (Default value is 0.5 degrees)</li>
</ol>
<p>For example, the following command will split the input file (100 deg<sup>2</sup>) into 4 pieces with an overlap of 0.5 degrees between each piece:</p>
<blockquote class="doxtable">
<p>&gt;&gt; cat_split &ndash;input_file FILE_NAME &ndash;ra_lower 30.0 &ndash;ra_upper 4.0 &ndash;dec_lower 10.0 &ndash;dec_upper 20.0 &ndash;ra_bins 2 &ndash;dec_bins 2</p>
<p></p>
</blockquote>
<p><b>Code Options</b></p>
<ul>
<li><code>-h [ --help ]</code>: This option produces the help message with all the code options and exits.</li>
<li><code>-v [ --version ]</code>: This option prints the current version of the code and exits.</li>
<li><code>-i [ --input_file ]</code>: This option specifies the input file name.</li>
<li><code>--ra_lower</code>: Lower limit in right ascension of the catalogue.</li>
<li><code>--ra_upper</code>: Upper limit in right ascension of the catalogue.</li>
<li><code>--dec_lower</code>: Lower limit in declination of the catalogue.</li>
<li><code>--dec_upper</code>: Upper limit in declination of the catalogue.</li>
<li><code>--ra_overlap</code>: Overlap in right ascension between pieces. The default is 0.5 degrees.</li>
<li><code>--dec_overlap</code>: Overlap in declination between bins. The default is 0.5 degrees.</li>
<li><code>--n_ra_bins</code>: Number of bins in right ascension.</li>
<li><code>--n_dec_bins</code>: Number of bins in declination.</li>
<li><code>--n_procs</code>: Number of processes. Use this option instead of <em>n_ra_bins</em> and <em>n_dec_bins</em> to define the total number of bins.</li>
</ul>
<p><a class="anchor" id="merge_anchor"></a> <a class="el" href="class_cat___merge.html" title="Class for merging cluster catalogues. ">Cat_Merge</a> Code</p>
<p>This code merges together the <a class="el" href="class_fo_f.html" title="Class for perfoming friends-of-friends cluster detection. ">FoF</a> outputs from various pieces of a larger catalogue.</p>
<p><b>Input Format</b></p>
<p>The input file is simply a list of the <a class="el" href="class_main.html" title="Class for running the FoF algorithm. ">Main</a> code members output files.</p>
<p><code>e.g.</code></p>
<p><code>piece_00_members_0.046_0.9_phot.dat</code></p>
<p><code>piece_01_members_0.046_0.9_phot.dat</code></p>
<p><code>piece_02_members_0.046_0.9_phot.dat</code></p>
<p><code>piece_03_members_0.046_0.9_phot.dat</code></p>
<p><b>Output Format</b></p>
<p>The output format is exactly the same as that of the <a class="el" href="class_main.html" title="Class for running the FoF algorithm. ">Main</a> code (see <a href="#main_output">above</a>). If, however, the background data is not provided the signal-to-noise ratio for each cluster candidate will be set to 0.0.</p>
<p><b>Run</b></p>
<p>To run simply specify the input file name and the desired output file name as follows:</p>
<blockquote class="doxtable">
<p>&gt;&gt; cat_merge &ndash;input_file FILE_NAME &ndash;ouput_file MERGED_CLUSTERS</p>
<p></p>
</blockquote>
<p>In order to provide signal-to-noise ratio values for each of the clusters the <em>bg_data</em> option must also be used as follows:</p>
<blockquote class="doxtable">
<p>&gt;&gt; cat_merge &ndash;input_file FILE_NAME &ndash;ouput_file MERGED_CLUSTERS &ndash;bg_data BG_DATA_FILE</p>
<p></p>
</blockquote>
<p><b>Code Options</b></p>
<ul>
<li><code>-h [ --help ]</code>: This option produces the help message with all the code options and exits.</li>
<li><code>-v [ --version ]</code>: This option prints the current version of the code and exits.</li>
<li><code>-i [ --input_file ]</code>: This option specifies the input file name.</li>
<li><code>-o [ --output_file ]</code>: This option specifies the output file name.</li>
<li><code>--input_mode</code>: This option specifies the input file format. The options permitted are ascii or fits. The default value is ascii.</li>
<li><code>--output_mode</code>: This option specifies the output file format. The options permitted are ascii or fits. The default value is ascii.</li>
<li><code>--bg_data</code>: This option specifies the file name containing the background field data. (<em>i.e.</em> the output from the <a class="el" href="class_main.html" title="Class for running the FoF algorithm. ">Main</a> code option <em>print_bg_data</em>) </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jul 6 2015 11:30:52 for fof_cluster_finder by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
